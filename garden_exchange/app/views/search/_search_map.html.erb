
<script src="//maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=geometry"type="text/javascript" ></script>


<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<div class="map_container"> 
  <div id="map" class="gmaps4rails_map"></div> 
</div>

<div style='width: 100%;'>
  <div id="area" style='width: 100%; height: 400px;'></div>
</div>


<script type="text/javascript">

  handler = Gmaps.build('Google');
  handler.buildMap({ provider: { center:{lat:45.5424364,lng:-122.654422}, maxZoom:18}, internal: {id: 'area'}}, 
    function(){ markers = handler.addMarkers(<%=raw @locations.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();    
    });

</script>



